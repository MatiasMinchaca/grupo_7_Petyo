<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/images/isotipo.png" type="image/x-icon" rel="shortcut icon" />
    <title> <%= title %> </title>
    <link rel="stylesheet" href="/styleSheet/adminDashboard.css">
    <link rel="stylesheet" href="/styleSheet/adminLoad.css">
    <link rel="stylesheet" href="/styleSheet/loadingImage.css">
</head>
<body>
    <%- include('../partials/loadingImage') %> 
    <%- include('../partials/adminHeader') %> 
        </section>
        <section class="grid">
        <article class="article-load-product">
            <main class="product-load-container">
                <form class="form-load" id="form-loadProduct" action="/admin/products/load" method="POST" enctype="multipart/form-data">
                    <select id="select-category-loadProduct" type="text" placeholder="Tipo" name="category" class="select-type-product" >
                        <option selected hidden value="">Categorias</option>
                        <% categories.forEach(category => { %>
                            <option value="<%- category.id %>" <%= locals.old && old.category.name == category.name ? "selected" : null %>><%- category.name %></option>
                        <% }) %>
                    </select>
                    <% if(locals.errors && errors.category) {%>
                        <small class="error-message"><%= errors.category.msg %></small>
                    <% } %>
                    <small id="error-category-loadProduct" class="error-message"></small>
                    <select id="select-subcategory-loadProduct" type="text" placeholder="Tipo" name="subcategoryId" class="select-type-product" >
                        <option selected hidden value="">Subcategorias</option>
                    </select>
                    <% if(locals.errors && errors.subcategory) {%>
                        <small class="error-message"><%= errors.subcategory.msg %></small>
                    <% } %>
                    <small id="error-subcategory-loadProduct" class="error-message"></small>
                    <div class="preview-image-container">
                        <label class="btn-load-image-admin" for="imgInp">Seleccione una imagen</label>
                        <input type='file' id="imgInp" name="image" aria-label="file example" hidden="hidden" >
                        <img class="preview-image" id="blah" src="https://via.placeholder.com/150" alt="Tu imagen" >
                        <small id="error-image-loadProduct" class="error-message"></small>
                    </div>
                    <label for="name-product-load" class="name-product-load-label">Nombre del producto</label>
                    <input type="text" class="name-product-load" id="input-name-loadProduct" name="name" value="<%= locals.old && old.name %>">
                    <% if(locals.errors && errors.name) {%>
                        <small class="error-message"><%= errors.name.msg %></small>
                    <% } %>
                    <small id="error-name-loadProduct" class="error-message"></small>
                    <label for="price-load-product">Precio</label>
                    <section class="price-section-load">
                        <input id="input-price-loadProduct"  type="number" class="price-input-load" id="price-load-product" name="price" value="<%= locals.old && old.price %>" >
                    </section>
                    <% if(locals.errors && errors.price) {%>
                        <small class="error-message"><%= errors.price.msg %></small>
                    <% } %>
                    <small id="error-price-loadProduct" class="error-message"></small>
                    <label for="id-load-product">Descuento</label>
                    <section class="id-section-load">
                        <input type="number" id="input-discount-loadProduct" name="discount" class="id-load-product" value="<%= locals.old && old.discount %>" >
                    </section>
                    <small id="error-discount-loadProduct" class="error-message"></small>
                    <textarea id="input-description-loadProduct" cols="10" rows="10" class="description-product-load" name="description" placeholder="DescripciÃ³n del producto" ><%= locals.old && old.description %></textarea>
                    <% if(locals.errors && errors.description) {%>
                        <small class="error-message"><%= errors.description.msg %></small>
                    <% } %>
                    <small id="error-description-loadProduct" class="error-message"></small>
                    <input type="submit" value="Cargar producto" class="btn-load-product" >
                    <small id="error-form-loadProduct" class="error-message"></small>
                </form> 
            </main></article>
        </section>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <script src="/js/admin.js"></script>
        <script src="/js/adminDashboard.js"></script> 
        <script src="/js/loadProductValidator.js"></script>
        <script src="/js/subcategory.js"></script>
</body>
</html>