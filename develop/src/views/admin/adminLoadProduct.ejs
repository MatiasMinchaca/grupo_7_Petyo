<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/images/isotipo.png" type="image/x-icon" rel="shortcut icon" />
    <link rel="stylesheet" href="/styleSheet/adminDashboard.css">
    <link rel="stylesheet" href="/styleSheet/adminLoad.css">
</head>
<body>
    <%- include('../partials/adminHeader') %> 
        </section>
        <section class="grid">
        <article class="article-load-product">
            <main class="product-load-container">
                <form class="form-load" action="/admin/products/load" method="POST" enctype="multipart/form-data">
                    <select type="text" placeholder="Tipo" name="category" class="select-type-product" >
                        <option selected hidden value="">Categorias</option>
                        <% locals.categories.forEach(category => { %>
                            <option value="<%- category.id %>" <%= locals.old && old.category == category.id ? "selected" : null %>><%- category.name %></option>
                         <% }) %>
                    </select>
                    <% if(locals.errors && errors.category) {%>
                        <small class="text-danger"><%= errors.category.msg %></small>
                    <% } %>
                    <select type="text" placeholder="Tipo" name="subcategory" class="select-type-product" >
                        <option selected hidden value="">Subcategorias</option>
                         <% locals.categories[0].subcategories.forEach(subcategory => { %>
                            <option value="<%- subcategory%>" <%= locals.old && old.subcategory == subcategory ? "selected" : null %>><%- subcategory.name %></option>
                         <% }) %>
                    </select>
                    <% if(locals.errors && errors.subcategory) {%>
                        <small class="text-danger"><%= errors.subcategory.msg %></small>
                    <% } %>
                    <div class="preview-image-container">
                        <label class="btn-load-image-admin" for="imgInp">Seleccione una imagen</label>
                        <input type='file' id="imgInp" name="image" aria-label="file example" hidden="hidden" >
                        <img class="preview-image" id="blah" src="https://via.placeholder.com/150" alt="Tu imagen" >
                    </div>
                    <label for="name-product-load" class="name-product-load-label">Nombre del producto</label>
                    <input type="text" class="name-product-load" id="name-product-load" name="name" value="<%= locals.old && old.name %>">
                    <% if(locals.errors && errors.name) {%>
                        <small class="text-danger"><%= errors.name.msg %></small>
                    <% } %>
                    <label for="price-load-product">Precio</label>
                    <section class="price-section-load">
                        <h2 class="sing-price-load">$</h2>
                        <input type="number" class="price-input-load" id="price-load-product" name="price" value="<%= locals.old && old.price %>" >
                    </section>
                    <% if(locals.errors && errors.price) {%>
                        <small class="text-danger"><%= errors.price.msg %></small>
                    <% } %>
                    <label for="id-load-product">Descuento</label>
                    <section class="id-section-load">
                        <input type="number" id="id-load-product" name="discount" class="id-load-product" value="<%= locals.old && old.discount %>" >
                        <h2 class="sing-id-load">%</h2>
                    </section>
                    <textarea cols="10" rows="10" class="description-product-load" name="description" placeholder="DescripciÃ³n del producto" ><%= locals.old && old.description %></textarea>
                    <% if(locals.errors && errors.description) {%>
                        <small class="text-danger"><%= errors.description.msg %></small>
                    <% } %>
                    <input type="submit" value="Cargar producto" class="btn-load-product" >
                </form> 
            </main></article>
        </section>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <script src="/js/admin.js"></script>
        <script src="/js/adminDashboard.js"></script> 
</body>
</html>